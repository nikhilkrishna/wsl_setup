# Kafka Setup

> Extracted from `home-manager/modules/kafka.nix`

## Overview

Kafka CLI tools are installed via Nix, with certificates symlinked from Windows and configuration files generated by Nix with correct WSL paths.

## Installed Tools

- **apacheKafka** - Provides `kafka-consumer-groups.sh`, `kafka-topics.sh`, etc.
- **kafkactl** - Modern CLI with named context support

## Certificate Structure

Certificates are managed on the Windows side and symlinked into WSL.

### Windows Location

```
C:\Users\NikhilKrishnaNair\.kafka\certs\
```

### Expected Directory Structure

```
certs/
├── staging/
│   ├── ca.pem
│   ├── keystore.pem
│   ├── service.cert
│   └── service.key
└── live/
    ├── ca.pem
    ├── keystore.pem
    ├── service.cert
    └── service.key
```

### WSL Symlink

The certificates directory is symlinked to `~/.kafka/certs` in WSL, allowing both Windows and WSL tools to share the same certificate files.

## Configuration Files

### Native Kafka Tools

Configuration files are generated at:
- `~/.kafka/staging/config.properties`
- `~/.kafka/live/config.properties`

These use PEM-based SSL configuration with paths pointing to the WSL symlinked certificates.

### kafkactl

kafkactl uses a YAML configuration at `~/.config/kafkactl/config.yml` with named contexts:

```bash
# Switch to staging
kafkactl config use-context staging

# Switch to live (default)
kafkactl config use-context live

# List topics
kafkactl get topics

# Describe consumer group
kafkactl describe consumer-group my-group
```

## Related Files

- `home-manager/modules/kafka.nix` - Kafka tools and configuration
